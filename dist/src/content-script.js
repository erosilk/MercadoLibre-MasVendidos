"use strict";function _toConsumableArray(n){if(Array.isArray(n)){for(var t=0,e=Array(n.length);t<n.length;t++)e[t]=n[t];return e}return Array.from(n)}function sortItems(){function n(n,t){fetch("https://api.mercadolibre.com/items/"+n).then(function(n){return n.json().then(function(n){return t(n.id,n.sold_quantity)})})}function t(){if(i.length===o.length/2){var n=r.slice().sort(function(n,t){return o[o.indexOf(n.firstElementChild.id)+1]-o[o.indexOf(t.firstElementChild.id)+1]}),t=document.querySelector(e);t.innerHTML=null,n.forEach(function(n){return t.insertAdjacentElement("afterbegin",n)})}}var e="#searchResults",r=[].concat(_toConsumableArray(document.querySelectorAll(e+" > li"))),i=r.map(function(n){return n.innerHTML.match(/(MLA)[0-9]+/i)[0]}),o=[];i.forEach(function(e){n(e,function(n,e){o.push(n),o.push(e),t()})})}chrome.runtime.sendMessage("getState",function(n){n&&sortItems()});